import{S as e}from"./shared-import-splide.esm.bundle.min.js";function t(e){return t=e,Array.isArray(t)?e:[e];
/*!
 * @splidejs/splide-extension-auto-scroll
 * Version  : 0.3.7
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */
var t}function o(e){return requestAnimationFrame(e)}function n(e){const{event:o}=e,n={};let i=[];function r(e,t,o){s(e,t,((e,t)=>{i=i.filter((n=>!!(n[0]!==e||n[1]!==t||o&&n[2]!==o)||(e.removeEventListener(t,n[2],n[3]),!1)))}))}function s(e,o,n){!function(e,o){t(e).forEach(o)}(e,(e=>{e&&o.split(" ").forEach(n.bind(null,e))}))}function d(){i=i.filter((e=>r(e[0],e[1]))),o.offBy(n)}return o.on("destroy",d,n),{on:function(e,t,i){o.on(e,t,n,i)},off:function(e){o.off(e,n)},emit:o.emit,bind:function(e,t,o,n){s(e,t,((e,t)=>{i.push([e,t,o,n]),e.addEventListener(t,o,n)}))},unbind:r,destroy:d}}function i(e){return!function(e){return null===e}(e)&&"object"==typeof e}var r=Array.prototype;function s(e,t,o){return r.slice.call(e,t,o)}function d(e,t,o){if(e){let n=Object.keys(e);n=o?n.reverse():n;for(let o=0;o<n.length;o++){const i=n[o];if("__proto__"!==i&&!1===t(e[i],i))break}}return e}function u(e){return s(arguments,1).forEach((t=>{d(t,((o,n)=>{e[n]=t[n]}))})),e}var{min:a,max:l,floor:c,ceil:f,abs:w}=Math;var m={speed:1,autoStart:!0,pauseOnHover:!0,pauseOnFocus:!0};function p(e,t,r){const{on:s,off:d,bind:c,unbind:f}=n(e),{translate:w,getPosition:p,toIndex:h,getLimit:S}=t.Move,{setIndex:g,getIndex:v}=t.Controller,{orient:y}=t.Direction,{root:b}=e;let A,E,q,k,x,L,P={};function _(){A||!1===r.autoScroll||(A=function(e,t,n,i){const{now:r}=Date;let s,d,u=0,a=!0,l=0;function c(){if(!a){const d=r()-s;if(d>=e?(u=1,s=r()):u=d/e,n&&n(u),1===u&&(t(),i&&++l>=i))return f();o(c)}}function f(){a=!0}function w(){cancelAnimationFrame(d),u=0,d=0,a=!0}return{start:function(t){!t&&w(),s=r()-(t?u*e:0),a=!1,o(c)},rewind:function(){s=r(),u=0,n&&n(u)},pause:f,cancel:w,set:function(t){e=t},isPaused:function(){return a}}}(0,D),function(){P.pauseOnHover&&c(b,"mouseenter mouseleave",(e=>{q="mouseenter"===e.type,N()}));P.pauseOnFocus&&c(b,"focusin focusout",(e=>{k="focusin"===e.type,N()}));s("updated",C),s(["move","drag","scroll"],(()=>{x=!0,M(!1)})),s(["moved","scrolled"],(()=>{x=!1,N()}))}(),P.autoStart&&("complete"===document.readyState?O():c(window,"load",O)))}function I(){A&&(A.cancel(),A=null,L=void 0,d(["move","drag","scroll","moved","scrolled"]),f(b,"mouseenter mouseleave focusin focusout"))}function C(){const{autoScroll:e}=r;!1!==e?(P=u(P,i(e)?e:{}),_()):I(),A&&void 0!==L&&w(L)}function O(){A&&A.isPaused()&&A.start(!0)}function M(e=!0){A&&!A.isPaused()&&A.pause(),E=e}function N(){E||(q||k||x?M(!1):O())}function D(){const o=p(),n=function(t){const o=P.speed||1;t+=y(o),e.is("slide")&&(t=function(e,t,o){const n=a(t,o),i=l(t,o);return a(l(n,e),i)}(t,S(!1),S(!0)));return t}(o);o!==n?(w(n),function(o){const{length:n}=e,i=(h(o)+n)%n;i!==v()&&(g(i),t.Slides.update(),t.Pagination.update())}(n),L=n):(M(!1),P.rewind&&e.go(0))}return{setup:function(){const{autoScroll:e}=r;P=u({},m,i(e)?e:{})},mount:_,destroy:I,play:O,pause:M}}window.Splide=e,window.slideshows={};const h=(t,o,n)=>{if(t.hasAttribute("data-thumbnails")){const i=document.getElementById(t.getAttribute("data-thumbnails"));window.slideshows[i.id]=new e(`#${i.id}`,{direction:"ttb",height:"var(--thumbnails-height)",autoHeight:!0,arrows:!1,pagination:!1,isNavigation:!0,focus:"left",gap:"0.625rem",slideFocus:!1}),window.slideshows[t.id]=new e(`#${t.id}`,o);const r=window.slideshows[t.id],s=window.slideshows[i.id];r.mount(n),document.addEventListener("shapes:product:arrow-change",(e=>{"prev"==e.detail.direction?s.go("<"):s.go(">");s.Components.Slides.getAt(s.index).slide.querySelector(".media-thumbnail").click()})),document.addEventListener("shapes:product:variantchange",(e=>{if(!e.target.contains(t))return;const o=e.detail.variant.featured_media.id,n=s.Components.Slides.filter((e=>e.slide.dataset.mediaId===o.toString()));n.length&&s.go(n[0].index)})),s.mount()}else window.slideshows[t.id]=new e(`#${t.id}`,o),window.slideshows[t.id].on("mounted",(e=>{const o=window.slideshows[t.id].root.querySelectorAll(".splide__slide--clone");for(let e=0;e<o.length;e++){let t=o[e].getElementsByTagName("*");for(let o=0;o<t.length;o++){let n=t[o];if(n.hasAttribute("id")&&(n.id=n.getAttribute("id")+"-"+e),n.hasAttribute("for")){let t=n.getAttribute("for")+"-"+e;n.setAttribute("for",t)}}}})),window.slideshows[t.id].mount(n)};function S(e,t,o){const n=e.root.querySelector(".splide__progress-bar");function i(){const t=e.Components.Controller.getEnd()+1;n.style.width=String(100*(e.index+1)/t)+"%"}return{mount:function(){n&&e.on("mounted move",i)}}}window.destroySlideshow=e=>{window.slideshows[e.id].destroy(),delete window.slideshows[e.id]},window.makeSlideshow=e=>{if(e.matches(".splide--thumbnails"))return;if(!e.id)return void console.error("Shapes Theme: makeSlideshow requires a unique ID on the slideshow root");if(window.slideshows[e.id])return;let t={mediaQuery:"min",perPage:1,perMove:1,autoWidth:!0,arrows:!0,pagination:!1,rewind:!0,autoScroll:{autoStart:!1},breakpoints:e.matches(".splide--mobile")?{990:{destroy:!0}}:{}};if(null!==e.querySelector(".slideshow-options")&&(t=JSON.parse(e.querySelector(".slideshow-options").textContent)),e.matches(".splide--product")){const t={mediaQuery:"min",type:"slide",perPage:1,perMove:1,autoWidth:!0,pagination:!1,arrows:!0,rewind:!0,drag:"true"!==e.dataset.dragDisabled,autoScroll:{autoStart:!1},breakpoints:{990:{destroy:!0}}};import("./components-splide-product.bundle.min.js").then((({default:o,SplideProduct:n})=>{h(e,t,{SplideProduct:n})}))}else{let o={};t.autoScroll&&!0===t.autoScroll.autoStart&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(o={AutoScroll:p}),h(e,t,o)}},window.discoverNewSlideshows=(e=document)=>{e.querySelectorAll(".splide").forEach((e=>{makeSlideshow(e)}))},window.destroySlideshowsIn=(e=document)=>{e.querySelectorAll(".splide").forEach((e=>{destroySlideshow(e)}))},document.addEventListener("DOMContentLoaded",(()=>{discoverNewSlideshows()})),document.addEventListener("shapes:productquickbuy:added",(()=>{discoverNewSlideshows()})),document.addEventListener("shapes:productquickbuy:willremove",(e=>{e.detail.container&&destroySlideshowsIn(e.detail.container)}));export{S as progressBar};
